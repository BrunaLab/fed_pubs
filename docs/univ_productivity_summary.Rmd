---
title: "Articles Published by US focal university Personnel"
subtitle: "January 2019 - May 2025)"
author: "Emilio M. Bruna"
date: "`r format(Sys.time(), '%d %B %Y')`"
# output: html_document
output: pdf_document
geometry: margin=1in
fontsize: 11pt
linkcolor: darkmidnightblue
urlcolor: darkmidnightblue
header-includes:
  - \usepackage{fancyhdr}
  - \pagestyle{fancy}
  - \usepackage[default]{sourcesanspro}
  - \usepackage{parskip}
  - \usepackage{geometry}
  - \usepackage{caption}
  - \usepackage{xcolor}
  - \definecolor{darkmidnightblue}{rgb}{0.0, 0.2, 0.4}
  - \AtBeginDocument{\let\maketitle\relax}
  - \usepackage[none]{hyphenat}
  - \usepackage{setspace}
  - \usepackage[document]{ragged2e}
  - \usepackage{graphicx}
  - \usepackage{sectsty}\allsectionsfont{\raggedright}
  - \usepackage{sectsty}\sectionfont{\centering\color{darkmidnightblue}}
  - \usepackage{sectsty}\subsectionfont{\centering\color{darkmidnightblue}}
  - \usepackage{titlesec}
  - \usepackage[export]{adjustbox}
  - \titlespacing{\section}{0pt}{24pt plus 2pt minus 1pt}{0pt plus 1pt minus 1pt}
  - \titlespacing{\subsection}{0pt}{12pt plus 2pt minus 1pt}{0pt plus 1pt minus 1pt}
  - \titlespacing{\subsubsection}{0pt}{12pt plus 2pt minus 1pt}{0pt plus 1pt minus 1pt}
  - \usepackage{floatrow}
  - \DeclareFloatSeparators{mysep}{\hskip-94em}
  # - \floatsetup[figure]{capposition=beside,capbesidesep=mysep,capbesideposition={right, center}}
  - \usepackage{float}
  - \usepackage{wrapfig} 
  - \newcommand{\blandscape}{\begin{landscape}}
  # - \usepackage[font=small,labelfont=bf,labelsep=space]{caption}
  # - \captionsetup{figurename=Fig.,tablename=Table}
  # - \usepackage[labelfont=bf]{caption}
  # - \captionsetup{font=footnotesize, textfont=footnotesize}
  - \fancyfoot{} # cues the use of fancy footer
  - \fancyhead[L]{Emilio M Bruna} # month & year on header left 
  - \fancyhead[R]{`r format(Sys.time(), '%d %B %Y')`} # name and page on header right
#Required for specifying captions t
  # - \usepackage{indentfirst}
  # - \setlength\parindent{22pt} # uncomment if you want indented paragraphs


# https://pubs.usgs.gov/search?q=&startYear=2019&__ncforminfo=Rf6y9tBB_4xn4sDOJ7tdSPmxI5Eu33dcCKy8YpAAAQRE-JJvXyAJAosPJMziEEMnxQE_iCi7dgGWVwrbQe9Gpb9a-7115VxO

---
# Publications by the 10 institutions publishing the most papers (between Jan 2019 & July 2025

\bigskip

```{r setup, include=FALSE}

library(tidyverse)
library(janitor)
library(gghighlight)
library(kableExtra)
library(data.table)
# library(knitr)

knitr::opts_chunk$set(echo = FALSE, message=FALSE,warning=FALSE)

options(scipen=999)

comma <- function(x) format(x, digits = 2, big.mark = ",")

knitr::opts_chunk$set(fig.pos = 'H')

knitr::opts_chunk$set(dpi=300,fig.width=6)

```


```{r data, cache=FALSE, echo=FALSE}

# Read data
summary_data<-read_csv("./docs/summary_info/uni_summary_data.csv")
jrnls_overall_first<-read_csv("./docs/summary_info/uni_jrnls_overall_first.csv")

# journals_n_perc_annual_first<-read_csv("./docs/summary_info/uni_journals_n_perc_annual_first.csv")

auth_per_pub_means<-read_csv("./docs/summary_info/uni_auth_per_pub_means.csv")

total_pubs_per_uni_first<-read_csv("./docs/summary_info/uni_total_pubs_per_uni_first.csv")


```





## Search (SCOPUS API)


- **No. of focal university Affil SCOPUS IDs searched:** N = `r comma(as.numeric(summary_data %>% filter(value=="scopus_id") %>% select(n)))`. 

- **No. of focal university Affil SCOPUS IDs returned:** N = `r comma(as.numeric(summary_data %>% filter(value=="total_affils") %>% select(n)))`. 

## Results 
- **Total No. of Publications:** N = `r comma(as.numeric(summary_data %>% filter(value=="total_pubs") %>% select(n)))`.

- **Total No. of Authors:** N = `r comma(as.numeric(summary_data %>% filter(value=="total_authors") %>% select(n)))`.


- **Total No. of Unique Authors:** N = `r comma(as.numeric(summary_data %>% filter(value=="total_unique_authors") %>% select(n)))`.


  > Unique authors with focal university affiliation (Primary): N = `r comma(as.numeric(summary_data %>% filter(value=="total_focal") %>% select(n)))`.

  > Unique non-focal university authors: N = `r comma(as.numeric(summary_data %>% filter(value=="total_NOTfocal") %>% select(n)))`.
  

- **Author Position **

  > Articles with focal university Author in 1st Author Position:  `r comma(as.numeric(summary_data %>% filter(value=="prop_papers_focal_1st") %>% select(n)))`.
  

  > Articles with focal university Author in Last Author position:  `r comma(as.numeric(summary_data %>% filter(value=="prop_papers_focal_last") %>% select(n)))`.
  

- **Authors per Publication**: 

  > Authors Per Publication: Mean = `r comma(as.numeric(auth_per_pub_means %>% filter(author_category=="Total") %>% select(mean_per_pub)))` (± `r comma(as.numeric(auth_per_pub_means %>% filter(author_category=="Total") %>% select(sd)))` SD)

  > focal university Authors per Publication: Mean  = `r comma(as.numeric(auth_per_pub_means %>% filter(author_category=="Focal") %>% select(mean_per_pub)))` (± `r comma(as.numeric(auth_per_pub_means %>% filter(author_category=="Focal") %>% select(sd)))` SD)

  > Non-focal university Authors per Publication Mean = `r comma(as.numeric(auth_per_pub_means %>% filter(author_category=="NonFocal") %>% select(mean_per_pub)))` (± `r comma(as.numeric(auth_per_pub_means %>% filter(author_category=="NonFocal") %>% select(sd)))` SD)

\bigskip


### Journals with the most papers with an Focal Uni 1st author (2019-2025)

```{r journals }

jrnls_overall_first %>% 
  slice_head(n=20) %>%
  mutate(perc=round(perc,3)) %>% 
  rename(N=n,
         percent=perc) %>% 
kable(digits = 2,
  format = "latex",
  align = "lcc",
  escape = FALSE,
  row.names = FALSE,
  booktabs = T,
  linesep = ""
) %>%
  kable_styling(
    bootstrap_options = c("hover"),
    # full_width = F,
    latex_options = c("scale_down","hold_position"),
    font_size = 12,
    position = "center"
  )

```



\newpage


## Total Publications by each university (2019-June 2025) and percent of overall productivity

\bigskip

```{r pubs_year}


total_pubs_per_uni_first %>%
  mutate(uni=if_else(uni=="mass_general","mass general",uni)) %>% 
  arrange(uni) %>% 
  arrange(desc(n)) %>% 
  mutate(perc=n/sum(n)*100) %>% 
  mutate(perc=round(perc,2)) %>% 
  mutate(n=paste(n, " (",perc,"\\%)",sep="")) %>%
  mutate(n=as.character(n)) %>% 
  mutate(perc=as.character(perc)) %>% 
  replace_na(list(n=" ",perc=" ")) %>% 
  select(-perc) %>%
  rename(University=uni,
         `N (\\%)`=n,
         ) %>% 
kable(
  # digits = 2,
  format = "latex",
  align = "ll",
  escape = FALSE,
  row.names = FALSE,
  booktabs = T,
  linesep = ""
) %>%
  kable_styling(
    bootstrap_options = c("hover"),
    # full_width = F,
    latex_options = c("scale_down","hold_position"),
    font_size = 12,
    position = "center"
  ) 
```





### Publications per year (2019-2024)

```{r  label = pubs_yr_1, echo = FALSE, fig.cap = "Publications per year (2019-2024)", out.width = '75%'}
knitr::include_graphics("../docs/images/total_pubs_per_yr_uni.png", error=FALSE)
```


### Articles indexed Monthly/Quarterly (2019-2024)

\bigskip


```{r  label = pubs_mo_yr_1, echo = FALSE, fig.cap = "Articles per month (2019-2024). Note: the the January-December peaks are likely due to journals journals publishing fewer than 12 issues per year. Smoothed out somewhat by converting to publications per quarter (see below).", out.width = '75%'}
knitr::include_graphics("../docs/images/pubs_per_month_uni.png", error = FALSE)

```
<!-- \bigskip -->
<!-- \bigskip -->

```{r  label = pubs_quarterly, echo = FALSE, fig.cap = "Articles per Quarter (2019-2024).", out.width = '75%'}
knitr::include_graphics("../docs/images/pubs_per_quarter_uni.png", error=FALSE)
```

### Publications Indexed Monthly January 1 - June 30 (2019-2025)

\bigskip

```{r  label = monthly_pubs_1, echo = FALSE, fig.cap = "Monthly publications from January 1 to June 30 (2019-2025).", out.width = '75%'}

knitr::include_graphics("../docs/images/monthly_pubs_to_date_uni.png", error=FALSE)

```



### Cumulative Total Publications January 1 - June 30 (2019-2025)

\bigskip

```{r  label = cumulative_fig, echo = FALSE, fig.cap = "Cumulative number of articles published by researchers at focal universities between January 1-June 30, 2019-2025 and the percent change in 2025 productivity relative to the same time period in 2024 (red).", out.width = '100%'}
knitr::include_graphics("../docs/images/pubs_mo_cum_fig_uni.png", error=FALSE)

```





### Total Publications January 1 - June 30 (2019-2025)

\bigskip

```{r  label = fig_total_to_date_1_fig, echo = FALSE, fig.cap = "Articles published by researchers at focal universities between January 1-June 30, 2019-2025 and the percent change in 2025 productivity relative to the same time period in 2024 (red). Numbers in blue are the number of articles published in 2024 and 2025.", out.width = '75%'}
knitr::include_graphics("../docs/images/total_pubs_to_month_x_uni.png", error=FALSE)
```


### Percent change in No. of publications (January-July) relative to same time period prior year.)



```{r label=agency_n_decline_first1, fig.cap="Percent change in publications (Jan-July) relative to same period previous year.", out.width = '75%'}

knitr::include_graphics("../docs/images/uni_n_decline_2.png", error=FALSE)

```






<!-- Need to compare with non-government institutions. Note that they are systematically tearing apart the most proiductive institution in the world (by far) and the leading system in the world (no foreign university or system even in top 20, only two in top 30). -->

<!-- 2019-2025 Harvard Med through T & M: 1,087,647  -->

<!-- 2019, 156075 -->
<!-- 2020, 167548 -->
<!-- 2021, 179386 -->
<!-- 2022, 170367  -->
<!-- 2023, 164971 -->
<!-- 2024, 167700 -->
<!-- 2025, 81590  -->



<!-- inst, affil_code, inst_code -->

<!-- Harvard University 191469, 726046 and Harvard Medical School, 441574, 449547 -->
<!-- University of Michigan - Ann Arbor, 347907, 418348 -->
<!-- University of Washington, 329371, 373766 -->
<!-- University of Pennsylvania, 269101, 368273	 -->
<!-- Stanford University, 306475, 416740 -->
<!-- University of California - Los Angeles, 312016, 392573 -->
<!-- Massachusetts General Hospital, 209891, 215786	 -->
<!-- University of California - San Francisco, 241713, 265358 -->
<!-- University of California - San Diego, 264376, 288722 -->
<!-- University of Florida, 245598, 283685	 -->


<!-- NEED ALL	 -->
<!-- University of Minnesota Twin Cities -->
<!-- The Ohio State University -->
<!-- The University of North Carolina at Chapel Hill -->




<!-- University of Minnesota Twin Cities, 54,421 -->
<!-- The Ohio State University 51,023 -->
<!-- The University of North Carolina at Chapel Hill, 50,485 -->
<!-- University of Wisconsin-Madison, 49,806 -->
<!-- Brigham and Women's Hospital, 49,412 -->
<!-- Columbia University, 49,261 -->
<!-- University of California - Berkeley, 48,039 -->
<!-- Mayo Clinic, 47,718 -->
<!-- Johns Hopkins University School of Medicine, 46,385 -->
<!-- Johns Hopkins University,46,113 -->
<!-- University of California - Davis, 45,094 -->
<!-- Pennsylvania State University, 44,111 -->
<!-- Massachusetts Institute of Technology, 43,977 -->
<!-- Texas A and M University, 43,291 -->
<!-- <!-- Chinese Academy of Sciences, 41,952 --> 
<!-- The University of Texas at Austin, 41,739 -->
<!-- UCSF School of Medicine, 41,669 -->
<!-- <!-- CNRS Centre National de la Recherche Scientifique, 41,620 --> 
<!-- University of Illinois Urbana-Champaign, 41,161 -->
<!-- University of Pittsburgh, 41,037 -->
<!-- <!-- National Institutes of Health (NIH), 40,815 --> 
<!-- Northwestern University, 40,570 -->
<!-- Harvard University, 40,459 -->
<!-- Yale School of Medicine, 40,112 -->

